# CaptainOS containerd configuration
# For containerd 2.x

version = 3
root = '/var/lib/containerd'
state = '/run/containerd'

# Disable CRI plugin (nerdctl uses native containerd API)
disabled_plugins = ["io.containerd.grpc.v1.cri", "io.containerd.internal.v1.opt"]

[grpc]
  address = '/run/containerd/containerd.sock'

# Registry host configuration directory (for insecure registries)
[plugins.'io.containerd.cri.v1.images'.registry]
  config_path = '/etc/containerd/certs.d'

[plugins.'io.containerd.cri.v1.runtime'.containerd]
  default_runtime_name = 'runc'

[plugins.'io.containerd.cri.v1.runtime'.containerd.runtimes.runc]
  runtime_type = 'io.containerd.runc.v2'

[plugins.'io.containerd.cri.v1.runtime'.cni]
  bin_dirs = ['/opt/cni/bin']
  conf_dir = '/etc/cni/net.d'
